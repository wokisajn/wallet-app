<div class="container">
  <h2 class="is-2 has-text-centered">Register</h2>

    <div [formGroup]="registerForm" (ngSubmit)="registerWithEmailAndPassword()">

    <div class="field">
        <label class="label">Email</label>
        <div class="control">
          <input class="input" type="text" formControlName="username" placeholder="email" required>
              <p class="help is-danger" *ngIf="registerForm.controls['username']?.touched && registerForm.controls['username']?.hasError('email')">
                Email is incorrect.
              </p>
              <p class="help is-danger" *ngIf="registerForm.controls['username']?.touched && registerForm.controls['username']?.hasError('required')">
                Email is required.
              </p>
        </div>
    </div>

    <div class="field">
        <label class="label">Phone Number</label>
        <div class="control">
          <input class="input" type="text" formControlName="phoneNumber" placeholder="phone number" required>
              <p class="help is-danger" *ngIf="registerForm.controls['phoneNumber']?.touched && registerForm.controls['phoneNumber']?.hasError('required')">
                Phone Number is required.
              </p>
        </div>
    </div>

    <div class="field">
        <label class="label">Password</label>
        <div class="control">
          <input class="input" type="{{ hide ? 'password' : 'text' }}"  formControlName="password" placeholder="password" required>
          <mat-icon matSuffix (click)="togglePasswordVisibility('password')">{{ hide ? 'visibility_off' : 'visibility' }}</mat-icon>
          <p class="help is-danger" *ngIf="registerForm.controls['password']?.touched && registerForm.controls['password']?.hasError('required')">
            Password is required.
          </p>
        </div>
    </div>

    <div class="field">
      <label class="label">Confirm password</label>
      <div class="control">
        <input class="input" type="{{ hideConfirm ? 'password' : 'text' }}"  formControlName="confirmPassword" placeholder="password" required>
        <mat-icon matSuffix (click)="togglePasswordVisibility('confirmPassword')">{{ hideConfirm ? 'visibility_off' : 'visibility' }}</mat-icon>
        <p class="help is-danger" *ngIf="registerForm.controls['password']?.touched && registerForm.controls['password']?.hasError('required')">
          Password is required.
        </p>
      </div>
    </div>

    <!-- 
      <mat-form-field appearance="outline">
        <mat-label>Password</mat-label>
        <input formControlName="password" matInput [type]="hide ? 'password' : 'text'">
        <mat-icon (click)="hide = !hide" matSuffix>{{ hide ? 'visibility_off' : 'visibility' }}</mat-icon>
        <mat-error *ngIf="registerForm.controls['password'].hasError('required')">Password is required</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Confirm Password</mat-label>
        <input formControlName="confirmPassword" matInput [type]="hideConfirmPassword ? 'password' : 'text'">
        <mat-icon (click)="hideConfirmPassword = !hideConfirmPassword" matSuffix>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
        <mat-error *ngIf="registerForm.controls['confirmPassword'].hasError('required')">Confirm Password is required</mat-error>
      </mat-form-field> 
    -->

    <p class="mt-3 has-text-centered">Already have an account?<a routerLink="/login"> Login</a></p>
        
    <button type="submit" [disabled]="registerForm.invalid && registerForm.get('password')?.value === registerForm.get('confirmPassword')?.value" class="button is-primary is-fullwidth mt-3">Register</button>

    <div class="has-text-centered">
        <hr class="divider">
          <p class="mt-3 or-text has-text-grey">OR</p>
        <hr class="divider">
    </div>
    
      <div class="google-card">
        <app-google-login-card></app-google-login-card>
      </div>
    </div>
</div>
        